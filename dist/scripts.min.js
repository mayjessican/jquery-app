var pokemonRepository=(function(){var repository=[];var $apiUrl='https://pokeapi.co/api/v2/pokemon/?limit=150';function addListItem(pokemon){var $pokemonList=$('.pokemon-list');var $listItem=$('<li>');var $button=$('<button type = "button" class="btn btn-outline-dark" data-toggle="modal" data-target="#myModal">'+pokemon.name+'</button>');$listItem.append($button);$pokemonList.append($listItem);$button.on('click',function(event){showDetails(pokemon)})}
function add(pokemon){repository.push(pokemon)}
function getAll(){return repository}
function loadList(){return $.ajax($apiUrl).then(function(json){json.results.forEach(function(item){var pokemon={name:item.name,detailsUrl:item.url};add(pokemon)})}).catch(function(e){console.error(e)})}
function loadDetails(item){var url=item.detailsUrl;return $.ajax(url).then(function(details){item.imageUrl=details.sprites.front_default;item.height=details.height;item.weight=details.weight;item.types=[];for(var i=0;i<details.types.length;i++){item.types.push(details.types[i].type.name)}
item.abilities=[];for(var i=0;i<details.abilities.length;i++){item.abilities.push(details.abilities[i].ability.name)}
return item}).catch(function(e){console.error(e)})}
function showModal(item){$('.modal-title').text(item.name);$('.height').text("Height: "+item.height+"m");$('.type').text("Type: "+item.types);$('.image').attr("src",item.imageUrl);$('.abilities').text("Abilities: "+item.abilities)}
function showDetails(item){pokemonRepository.loadDetails(item).then(function(){console.log(item);showModal(item)})}
return{add:add,getAll:getAll,addListItem:addListItem,loadList:loadList,showModal:showModal,loadDetails:loadDetails,showDetails:showDetails}})();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(pokemon){console.log(pokemon);pokemonRepository.addListItem(pokemon)})})